import{W as e,s as t,A as n,P as a,S as o,R as s,U as i,a as r,O as l,G as c,D as d,b as u,V as m}from"./vendor.a08f8ccd.js";let D,g;const h=[];!function(){D=document.getElementById("c"),g=new e({canvas:D,antialias:!0}),g.setClearColor(16711680,0),g.setPixelRatio(window.devicePixelRatio),g.outputEncoding=t,g.autoClear=!0,g.toneMapping=n,g.toneMappingExposure=.3;const p=new a(g);p.compileEquirectangularShader();["house","workshop","land"].forEach((function(e){const t=new o;(new s).setDataType(i).setPath("models/").load("river_walk_1_1k.hdr",(function(e){const n=p.fromEquirectangular(e).texture;p.dispose(),t.environment=n}));const n=document.getElementById("three-"+e);t.userData.element=n;const a=new r(35,1,.25,3050);a.position.set(2,5,10),t.rotation.y=Math.PI/2,"house"==e?(a.position.set(27.965819837017115,6.406842735638378,35.14534657091487),t.rotation.y=Math.PI):"workshop"==e?a.position.set(33.25308157435134,14.115172909416785,22.4285379119101):"land"==e&&a.position.set(-501,251,-630),t.userData.camera=a;const D=new l(t.userData.camera,t.userData.element);D.enableDamping=!1,D.dampingFactor=.1,D.autoRotate=!1,D.enablePan=!1,D.enableZoom=!0,D.screenSpacePanning=!0,D.maxPolarAngle=Math.PI/1.5,D.target.set(0,0,0),D.update(),"house"==e||"workshop"==e?(D.minDistance=30,D.maxDistance=60):"land"==e&&(D.minDistance=200,D.maxDistance=1160),t.userData.controls=D;const g=[new u(new m(0,-1,0),999)];t.userData.globalPlanes=g,t.userData.sliceDestination=10,"land"==e&&(t.userData.sliceDestination=50);(new c).setPath("models/").load(e+".glb",(function(e){t.add(e.scene)}));const w=new d(16777215,1);w.position.set(15,5,3),t.add(w),h.push(t)})),document.getElementById("house-whole").addEventListener("mousedown",(e=>{h[0].userData.sliceDestination=10})),document.getElementById("house-basement").addEventListener("mousedown",(e=>{h[0].userData.sliceDestination=-.15})),document.getElementById("house-floor-1").addEventListener("mousedown",(e=>{h[0].userData.sliceDestination=3.3})),document.getElementById("house-floor-2").addEventListener("mousedown",(e=>{h[0].userData.sliceDestination=6.5})),document.getElementById("workshop-whole").addEventListener("mousedown",(e=>{h[1].userData.sliceDestination=10})),document.getElementById("workshop-floor-1").addEventListener("mousedown",(e=>{h[1].userData.sliceDestination=2.5})),document.getElementById("workshop-floor-2").addEventListener("mousedown",(e=>{h[1].userData.sliceDestination=5.5}))}(),function e(){(function(){(function(){const e=D.clientWidth,t=D.clientHeight;D.width===e&&D.height===t||g.setSize(e,t,!1)})(),window.pageYOffset<7e3&&(D.style.transform=`translateY(${window.pageYOffset}px)`);g.setClearColor(3223169),g.setScissorTest(!1),g.clear(),g.setClearColor(3223169),g.setScissorTest(!0),h.forEach((function(e){e.userData.globalPlanes[0].constant=e.userData.globalPlanes[0].constant+.1*(e.userData.sliceDestination-e.userData.globalPlanes[0].constant);const t=e.userData.element.getBoundingClientRect();if(t.bottom<0||t.top>g.domElement.clientHeight||t.right<0||t.left>g.domElement.clientWidth)return;const n=t.right-t.left,a=t.bottom-t.top,o=t.left,s=g.domElement.clientHeight-t.bottom;g.setViewport(o,s,n,a),g.setScissor(o,s,n,a);const i=e.userData.camera;i.aspect=n/a,i.updateProjectionMatrix(),g.clippingPlanes=e.userData.globalPlanes,g.render(e,i)}))})(),requestAnimationFrame(e)}();
